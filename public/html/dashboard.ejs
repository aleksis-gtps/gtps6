<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>GTPS-6 Login</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root{
      --gold: #FFD700;
      --panel: rgba(16, 16, 34, 0.86);
      --field: rgba(10, 10, 25, 0.68);
      --stroke: rgba(255, 215, 0, 0.35);
      --text: rgba(255, 255, 255, 0.88);
      --shadow: rgba(0,0,0,0.55);
    }

    html, body { height: 100%; }

    body{
      font-family: 'Poppins', sans-serif;
      background: transparent;

      /* Better mobile behavior than plain 100vh (browser bars) */
      min-height: 100vh;
      min-height: 100svh;

      display: flex;
      align-items: center;
      justify-content: center;

      padding: 8px; /* smaller than before */
      -webkit-text-size-adjust: 100%;
    }

    .login-container{
      width: min(520px, 100%);
    }

    .login-box{
      background: var(--panel);
      border: 2px solid var(--stroke);
      border-radius: 16px;
      padding: 14px 12px; /* smaller */
      box-shadow:
        0 10px 28px var(--shadow),
        0 0 34px rgba(255, 215, 0, 0.12);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }

    .title-text{
      text-align: center;
      color: var(--gold);
      font-weight: 900;
      letter-spacing: 1.2px;
      font-size: 1.35rem; /* smaller */
      margin-bottom: 4px;
      text-shadow: 0 0 12px rgba(255,215,0,0.45), 2px 2px 0 rgba(0,0,0,0.45);
      line-height: 1.1;
    }

    .subtitle{
      text-align: center;
      color: var(--text);
      font-size: 0.72rem; /* smaller */
      font-weight: 600;
      line-height: 1.25;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.6);
    }

    .highlight{ color: var(--gold); font-weight: 800; }

    .input-group{ margin-bottom: 9px; }

    .input-label{
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--gold);
      font-weight: 800;
      font-size: 0.72rem; /* smaller */
      text-transform: uppercase;
      letter-spacing: 0.25px;
      margin-bottom: 5px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .input-wrapper{ position: relative; }

    .input-field{
      width: 100%;
      background: var(--field);
      border: 2px solid rgba(255,215,0,0.25);
      border-radius: 10px;
      padding: 10px 10px; /* smaller but still tap-friendly */
      font-size: 0.85rem;
      font-weight: 600;
      color: #fff;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);
      font-family: 'Poppins', sans-serif;

      /* Stop iOS auto-zoom if you ever set font-size below 16px */
      /* (we keep it near 14px+ visually, but safe) */
    }

    .input-field:focus{
      border-color: var(--gold);
      background: rgba(10, 10, 25, 0.82);
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.35), 0 0 14px rgba(255,215,0,0.30);
    }

    .input-field::placeholder{
      color: rgba(255,255,255,0.35);
      font-weight: 500;
    }

    .toggle-password{
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      cursor: pointer;

      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #0b0b0b;
      font-weight: 900;
      font-size: 0.62rem; /* smaller */
      border-radius: 7px;
      padding: 5px 8px;
      box-shadow: 0 2px 6px rgba(255,215,0,0.35);
      user-select: none;
    }

    .toggle-password:active{
      transform: translateY(-50%) scale(0.98);
    }

    .remember{
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0 8px;
    }

    .remember input{
      width: 16px;
      height: 16px;
      accent-color: var(--gold);
      cursor: pointer;
    }

    .remember label{
      color: rgba(255,255,255,0.82);
      font-size: 0.72rem;
      font-weight: 600;
      cursor: pointer;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }

    .button-group{
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .btn{
      flex: 1;
      border: none;
      border-radius: 10px;
      padding: 10px 10px;  /* smaller */
      font-size: 0.82rem;  /* smaller */
      font-weight: 900;
      text-transform: uppercase;
      cursor: pointer;
      letter-spacing: 0.2px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.18);
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
      font-family: 'Poppins', sans-serif;
      white-space: nowrap;
    }

    .btn:hover{ transform: translateY(-1px); filter: brightness(1.03); }
    .btn:active{ transform: translateY(0); box-shadow: 0 2px 8px rgba(0,0,0,0.25); }

    .btn-login{
      background: linear-gradient(135deg, #39b54a 0%, #2e8f3b 100%);
      color: #fff;
    }

    .btn-register{
      background: linear-gradient(135deg, #ff9a14 0%, #e65d00 100%);
      color: #fff;
    }

    .credit{
      text-align: center;
      margin-top: 10px;
      padding-top: 8px;
      border-top: 1px solid rgba(255,215,0,0.18);
      color: rgba(255,255,255,0.55);
      font-size: 0.66rem; /* smaller */
      font-weight: 600;
    }
    .credit span{ color: var(--gold); font-weight: 800; }

    /* Very narrow screens: stack buttons to avoid overflow */
    @media (max-width: 340px){
      .button-group{ flex-direction: column; }
      .btn{ width: 100%; }
    }

    /* Short height screens: compress spacing further */
    @media (max-height: 650px){
      body{ padding: 6px; }
      .login-box{ padding: 12px 10px; }
      .subtitle{ margin-bottom: 8px; }
      .input-group{ margin-bottom: 8px; }
      .credit{ margin-top: 8px; padding-top: 6px; }
    }

    /* Very short screens: hide credit to guarantee fit */
    @media (max-height: 580px){
      .credit{ display: none; }
    }
  </style>
</head>

<body>
  <div class="login-container">
    <div class="login-box">
      <h1 class="title-text">GTPS-6</h1>
      <p class="subtitle">
        Enter your <span class="highlight">GrowID</span> and <span class="highlight">Password</span>
      </p>

      <form method="post" action="/player/growid/login/validate" id="loginForm" autocomplete="on">
        <input type="hidden" name="type" id="formType" value="log" />
        <input type="hidden" name="_token" value="<%= JSON.stringify(data) %>" />

        <div class="input-group">
          <label for="loginGrowId" class="input-label">
            <i class="fas fa-user"></i> GrowID
          </label>
          <input
            type="text"
            id="loginGrowId"
            name="growId"
            placeholder="Enter your GrowID"
            class="input-field"
            autocomplete="username"
          />
        </div>

        <div class="input-group">
          <label for="loginPassword" class="input-label">
            <i class="fas fa-lock"></i> Password
          </label>
          <div class="input-wrapper">
            <input
              type="password"
              id="loginPassword"
              name="password"
              placeholder="Enter your password"
              class="input-field"
              style="padding-right: 70px;"
              autocomplete="current-password"
            />
            <button type="button" id="toggleLogPassword" class="toggle-password">SHOW</button>
          </div>
        </div>

        <div class="remember">
          <input type="checkbox" id="rememberMe">
          <label for="rememberMe">Remember me</label>
        </div>

        <div class="button-group">
          <button type="button" id="loginButton" class="btn btn-login">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
          <button type="button" id="registerButton" class="btn btn-register">
            <i class="fas fa-user-plus"></i> Register
          </button>
        </div>

        <div class="credit">
          Developed by <span>@aleksis</span>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Remember Me load
    document.addEventListener('DOMContentLoaded', function () {
      const rememberMe = localStorage.getItem('rememberMe') === 'true';
      const growId = localStorage.getItem('growId') || '';
      const pass = localStorage.getItem('password') || '';

      document.getElementById('rememberMe').checked = rememberMe;
      if (rememberMe) {
        document.getElementById('loginGrowId').value = growId;
        document.getElementById('loginPassword').value = pass;
      }
    });

    // Toggle password
    document.getElementById('toggleLogPassword').addEventListener('click', function () {
      const passwordField = document.getElementById('loginPassword');
      const isHidden = passwordField.type === 'password';
      passwordField.type = isHidden ? 'text' : 'password';
      this.textContent = isHidden ? 'HIDE' : 'SHOW';
      passwordField.focus();
    });

    function saveRememberMe() {
      const uName = document.getElementById('loginGrowId').value.trim();
      const uPass = document.getElementById('loginPassword').value.trim();
      const remember = document.getElementById('rememberMe').checked;

      if (remember) {
        localStorage.setItem('growId', uName);
        localStorage.setItem('password', uPass);
        localStorage.setItem('rememberMe', 'true');
      } else {
        localStorage.removeItem('growId');
        localStorage.removeItem('password');
        localStorage.setItem('rememberMe', 'false');
      }
    }

    function validateBasic() {
      const uName = document.getElementById('loginGrowId').value.trim();
      const uPass = document.getElementById('loginPassword').value.trim();
      if (!uName || !uPass) {
        alert('Please enter both GrowID and Password!');
        return false;
      }
      return true;
    }

    // Login
    document.getElementById('loginButton').addEventListener('click', function () {
      if (!validateBasic()) return;
      document.getElementById('formType').value = 'log';
      saveRememberMe();
      document.getElementById('loginForm').submit();
    });

    // Register
    document.getElementById('registerButton').addEventListener('click', function () {
      if (!validateBasic()) return;
      document.getElementById('formType').value = 'reg';
      saveRememberMe();
      document.getElementById('loginForm').submit();
    });

    // Enter key: login (works even if user taps Enter on GrowID or Password)
    ['loginGrowId', 'loginPassword'].forEach((id) => {
      document.getElementById(id).addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          document.getElementById('loginButton').click();
        }
      });
    });
  </script>
</body>
</html>
