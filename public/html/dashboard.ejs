<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>GTPS-6 Login</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root{
      --gold: #FFD700;
      --panel: rgba(16, 16, 34, 0.84);
      --field: rgba(10, 10, 25, 0.62);
      --stroke: rgba(255, 215, 0, 0.33);
      --text: rgba(255, 255, 255, 0.88);
      --shadow: rgba(0,0,0,0.55);

      /* Controls sizing (tune these if needed) */
      --control-h: 40px;         /* input/button height baseline */
      --control-pad-x: 12px;
      --toggle-w: 64px;
    }

    html, body { height: 100%; }

    body{
      font-family: 'Poppins', sans-serif;
      background: transparent;

      min-height: 100vh;
      min-height: 100svh;

      display: flex;
      justify-content: center;
      align-items: center;

      padding: 8px;
      -webkit-text-size-adjust: 100%;
    }

    .login-container{
      width: min(520px, 100%);
    }

    .login-box{
      background: var(--panel);
      border: 2px solid var(--stroke);
      border-radius: 16px;
      padding: 12px 12px;

      box-shadow: 0 10px 28px var(--shadow), 0 0 34px rgba(255, 215, 0, 0.10);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);

      /* Never exceed screen height; scroll inside only if absolutely needed */
      max-height: calc(100svh - 16px);
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    .title-text{
      text-align: center;
      color: var(--gold);
      font-weight: 900;
      letter-spacing: 1px;
      font-size: 1.15rem;
      margin-bottom: 3px;
      line-height: 1.05;
      text-shadow: 0 0 10px rgba(255,215,0,0.4), 2px 2px 0 rgba(0,0,0,0.45);
    }

    .subtitle{
      text-align: center;
      color: var(--text);
      font-size: 0.68rem;
      font-weight: 600;
      line-height: 1.2;
      margin-bottom: 8px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.6);
    }

    .highlight{ color: var(--gold); font-weight: 800; }

    .input-group{ margin-bottom: 8px; }

    .input-label{
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--gold);
      font-weight: 800;
      font-size: 0.68rem;
      text-transform: uppercase;
      letter-spacing: 0.2px;
      margin-bottom: 4px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.45);
    }

    /* Default input */
    .input-field{
      width: 100%;
      background: var(--field);
      border: 2px solid rgba(255,215,0,0.22);
      border-radius: 10px;
      padding: 0 var(--control-pad-x);
      height: var(--control-h);

      /* keep 16px to avoid iOS zoom */
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      outline: none;

      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);
      font-family: 'Poppins', sans-serif;
    }

    .input-field:focus{
      border-color: var(--gold);
      background: rgba(10, 10, 25, 0.78);
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.35), 0 0 12px rgba(255,215,0,0.25);
    }

    .input-field::placeholder{
      color: rgba(255,255,255,0.35);
      font-weight: 500;
    }

    /* Password wrapper: fixes SHOW/HIDE alignment */
    .input-wrapper{
      position: relative;
      height: var(--control-h);
    }

    .input-wrapper .input-field{
      position: absolute;
      inset: 0;
      height: 100%;
      padding-right: calc(var(--toggle-w) + 10px);
    }

    .toggle-password{
      position: absolute;
      top: 50%;
      right: 6px;
      transform: translateY(-50%);
      border: none;
      cursor: pointer;

      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #0b0b0b;
      font-weight: 900;
      font-size: 0.70rem;

      height: calc(var(--control-h) - 10px);
      min-width: var(--toggle-w);
      padding: 0 10px;

      display: inline-flex;
      align-items: center;
      justify-content: center;

      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(255,215,0,0.30);
      user-select: none;
      white-space: nowrap;
    }

    .toggle-password:active{
      transform: translateY(-50%) scale(0.98);
    }

    .remember{
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 2px 0 8px;
    }

    .remember input{
      width: 15px;
      height: 15px;
      accent-color: var(--gold);
      cursor: pointer;
    }

    .remember label{
      color: rgba(255,255,255,0.82);
      font-size: 0.68rem;
      font-weight: 600;
      cursor: pointer;
    }

    .button-group{
      display: flex;
      gap: 8px;
      margin-top: 6px;
    }

    .btn{
      flex: 1;
      border: none;
      border-radius: 10px;
      padding: 9px 10px;

      font-size: 0.78rem;
      font-weight: 900;
      text-transform: uppercase;
      cursor: pointer;
      letter-spacing: 0.2px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.16);
      transition: transform .15s ease, filter .15s ease;
      font-family: 'Poppins', sans-serif;
      white-space: nowrap;
    }

    .btn:hover{ transform: translateY(-1px); filter: brightness(1.03); }
    .btn:active{ transform: translateY(0); }

    .btn-login{
      background: linear-gradient(135deg, #39b54a 0%, #2e8f3b 100%);
      color: #fff;
    }

    .btn-register{
      background: linear-gradient(135deg, #ff9a14 0%, #e65d00 100%);
      color: #fff;
    }

    .credit{
      text-align: center;
      margin-top: 8px;
      padding-top: 6px;
      border-top: 1px solid rgba(255,215,0,0.16);
      color: rgba(255,255,255,0.55);
      font-size: 0.62rem;
      font-weight: 600;
    }
    .credit span{ color: var(--gold); font-weight: 800; }

    @media (max-width: 340px){
      .button-group{ flex-direction: column; }
    }

    /* Short screens: move panel up and shrink controls a bit */
    @media (max-height: 520px){
      body{
        align-items: flex-start;
        padding-top: 6px;
      }
      :root{
        --control-h: 36px;
        --toggle-w: 60px;
      }
      .credit{ display: none; }
    }
  </style>
</head>

<body>
  <div class="login-container">
    <div class="login-box">
      <h1 class="title-text">GTPS-6</h1>
      <p class="subtitle">
        Enter your <span class="highlight">GrowID</span> and <span class="highlight">Password</span>
      </p>

      <form method="post" action="/player/growid/login/validate" id="loginForm" autocomplete="on">
        <input type="hidden" name="type" id="formType" value="log" />
        <input type="hidden" name="_token" value="<%= JSON.stringify(data) %>" />

        <div class="input-group">
          <label for="loginGrowId" class="input-label">
            <i class="fas fa-user"></i> GrowID
          </label>
          <input
            type="text"
            id="loginGrowId"
            name="growId"
            placeholder="Enter your GrowID"
            class="input-field"
            autocomplete="username"
          />
        </div>

        <div class="input-group">
          <label for="loginPassword" class="input-label">
            <i class="fas fa-lock"></i> Password
          </label>
          <div class="input-wrapper">
            <input
              type="password"
              id="loginPassword"
              name="password"
              placeholder="Enter your password"
              class="input-field"
              autocomplete="current-password"
            />
            <button type="button" id="toggleLogPassword" class="toggle-password">SHOW</button>
          </div>
        </div>

        <div class="remember">
          <input type="checkbox" id="rememberMe">
          <label for="rememberMe">Remember me</label>
        </div>

        <div class="button-group">
          <button type="button" id="loginButton" class="btn btn-login">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
          <button type="button" id="registerButton" class="btn btn-register">
            <i class="fas fa-user-plus"></i> Register
          </button>
        </div>

        <div class="credit">
          Developed by <span>@aleksis</span>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Remember Me load
    document.addEventListener('DOMContentLoaded', function () {
      const rememberMe = localStorage.getItem('rememberMe') === 'true';
      document.getElementById('rememberMe').checked = rememberMe;

      if (rememberMe) {
        document.getElementById('loginGrowId').value = localStorage.getItem('growId') || '';
        document.getElementById('loginPassword').value = localStorage.getItem('password') || '';
      }
    });

    // Toggle password
    document.getElementById('toggleLogPassword').addEventListener('click', function () {
      const passwordField = document.getElementById('loginPassword');
      const isHidden = passwordField.type === 'password';
      passwordField.type = isHidden ? 'text' : 'password';
      this.textContent = isHidden ? 'HIDE' : 'SHOW';
      passwordField.focus();
    });

    function saveRememberMe() {
      const uName = document.getElementById('loginGrowId').value.trim();
      const uPass = document.getElementById('loginPassword').value.trim();
      const remember = document.getElementById('rememberMe').checked;

      if (remember) {
        localStorage.setItem('growId', uName);
        localStorage.setItem('password', uPass);
        localStorage.setItem('rememberMe', 'true');
      } else {
        localStorage.removeItem('growId');
        localStorage.removeItem('password');
        localStorage.setItem('rememberMe', 'false');
      }
    }

    function validateLogin() {
      const uName = document.getElementById('loginGrowId').value.trim();
      const uPass = document.getElementById('loginPassword').value.trim();
      if (!uName || !uPass) {
        alert('Please enter both GrowID and Password!');
        return false;
      }
      return true;
    }

    // LOGIN (requires GrowID + Password)
    document.getElementById('loginButton').addEventListener('click', function () {
      if (!validateLogin()) return;

      document.getElementById('formType').value = 'log';
      saveRememberMe();
      document.getElementById('loginForm').submit();
    });

    // REGISTER (no GrowID/password required)
    document.getElementById('registerButton').addEventListener('click', function () {
      // Important: do NOT validate inputs
      document.getElementById('formType').value = 'reg';

      // If you want "remember me" to still save typed values, keep this.
      // If you DON'T want it to save anything on register, delete the next line.
      saveRememberMe();

      // Option A: submit same endpoint with type=reg (most common in GTPS panels)
      document.getElementById('loginForm').submit();

      // Option B (if your backend has a separate route):
      // window.location.href = "/player/growid/register";
    });

    // Enter key = login (only)
    ['loginGrowId', 'loginPassword'].forEach((id) => {
      document.getElementById(id).addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          document.getElementById('loginButton').click();
        }
      });
    });
  </script>
</body>
</html>
